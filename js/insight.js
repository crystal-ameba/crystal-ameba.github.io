!function(a,r){var t=a(".ins-search"),n=t.find(".ins-search-input"),o=t.find(".ins-section-wrapper"),c=t.find(".ins-section-container");function s(n,t,e,i,s){return a("<div>").addClass("ins-selectable").addClass("ins-search-item").append(a("<header>").append(a("<i>").addClass("fa").addClass("fa-"+n)).append(a("<span>").addClass("ins-title").text(null!=t&&""!==t?t:r.TRANSLATION.UNTITLED)).append(e?a("<span>").addClass("ins-slug").text(e):null)).append(i?a("<p>").addClass("ins-search-preview").text(i):null).attr("data-url",s)}function l(t,n){var e,i;if(0===n.length)return null;switch(i=r.TRANSLATION[t],t){case"POSTS":case"PAGES":e=n.map(function(n){return s("file",n.title,null,n.text.slice(0,150),n.link)});break;case"CATEGORIES":case"TAGS":e=n.map(function(n){return s("CATEGORIES"===t?"folder":"tag",n.name,n.slug,null,n.link)});break;default:return null}return i=i,a("<section>").addClass("ins-section").append(a("<header>").addClass("ins-section-header").text(i)).append(e)}function u(n){return n.split(" ").filter(function(n){return!!n}).map(function(n){return n.toUpperCase()})}function f(n,e,i){n=u(n);return n.filter(function(t){return 0<i.filter(function(n){return!!e.hasOwnProperty(n)&&(-1<e[n].toUpperCase().indexOf(t)||void 0)}).length}).length===n.length}function p(n,i,t,s){var a=0;return u(n).forEach(function(n){var e=new RegExp(n,"img");t.forEach(function(n,t){i.hasOwnProperty(n)&&(n=i[n].match(e),a+=n?n.length*s[t]:0)})}),a}function d(n,t){var e,i,s={POST:function(n){return p(e,n,["title","text"],[3,1])},PAGE:function(n){return p(e,n,["title","text"],[3,1])},CATEGORY:function(n){return p(e,n,["name","slug"],[1,1])},TAG:function(n){return p(e,n,["name","slug"],[1,1])}},t=(i=e=t,{POST:function(n){return f(i,n,["title","text"])},PAGE:function(n){return f(i,n,["title","text"])},CATEGORY:function(n){return f(i,n,["name","slug"])},TAG:function(n){return f(i,n,["name","slug"])}}),a=n.posts,r=n.pages,o=n.tags,n=n.categories;return{posts:a.filter(t.POST).sort(function(n,t){return s.POST(t)-s.POST(n)}).slice(0,5),pages:r.filter(t.PAGE).sort(function(n,t){return s.PAGE(t)-s.PAGE(n)}).slice(0,5),categories:n.filter(t.CATEGORY).sort(function(n,t){return s.CATEGORY(t)-s.CATEGORY(n)}).slice(0,5),tags:o.filter(t.TAG).sort(function(n,t){return s.TAG(t)-s.TAG(n)}).slice(0,5)}}function e(n){var t,e,i=a.makeArray(c.find(".ins-selectable")),s=-1,n=(i.forEach(function(n,t){a(n).hasClass("active")&&(s=t)}),(i.length+s+n)%i.length);a(i[s]).removeClass("active"),a(i[n]).addClass("active"),0!==(i=a(i[n])).length&&(n=o[0].clientHeight,t=i.position().top-o.scrollTop(),(e=i[0].clientHeight+i.position().top)>n+o.scrollTop()&&o.scrollTop(e-o[0].clientHeight),t<0&&o.scrollTop(i.position().top))}function i(n){n&&n.length&&(location.href=n.attr("data-url"))}t.parent().remove(".ins-search"),a("body").append(t),a.getJSON(r.CONTENT_URL,function(i){"#ins-search"===location.hash.trim()&&t.addClass("show"),n.on("input",function(){var n,t=a(this).val(),e=d(i,t);for(n in c.empty(),e)c.append(l(n.toUpperCase(),e[n]))}),n.trigger("input")});var h=!1;a(document).on("click focus",".navbar-main .search",function(){t.addClass("show"),t.find(".ins-search-input").focus()}).on("click touchend",".ins-search-item",function(n){"click"!==n.type&&!h||(i(a(this)),h=!1)}).on("click touchend",".ins-close",function(n){"click"!==n.type&&!h||(t.removeClass("show"),h=!1)}).on("keydown",function(n){if(t.hasClass("show"))switch(n.keyCode){case 27:t.removeClass("show");break;case 38:e(-1);break;case 40:e(1);break;case 13:i(c.find(".ins-selectable.active").eq(0))}}).on("touchstart",function(n){h=!0}).on("touchmove",function(n){h=!1})}(jQuery,window.INSIGHT_CONFIG);