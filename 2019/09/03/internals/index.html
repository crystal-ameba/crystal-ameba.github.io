<!DOCTYPE html><html class="has-navbar-fixed-top"><head><meta charset="utf-8"><title>Ameba&#39;s internals - Crystal Ameba</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css"><meta name="description" content="A static code analysis tool for Crystal"><meta name="keywords" content="crystal linter"><meta name="description" content="In this article you will find a high level overview of the Ameba’s modules, which will help to understand how it works internally. We will cover everything needed starting from source code loading and"><meta property="og:type" content="article"><meta property="og:title" content="Ameba&#39;s internals"><meta property="og:url" content="https://crystal-ameba.github.io/2019/09/03/internals/index.html"><meta property="og:site_name" content="Crystal Ameba"><meta property="og:description" content="In this article you will find a high level overview of the Ameba’s modules, which will help to understand how it works internally. We will cover everything needed starting from source code loading and"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://crystal-ameba.github.io/gallery/posts/internal-modules/ameba-modules.png"><meta property="article:published_time" content="2019-09-02T22:54:30.000Z"><meta property="article:modified_time" content="2025-07-28T09:11:53.475Z"><meta property="article:author" content="Vitalii Elenhaupt"><meta property="article:tag" content="parser"><meta property="article:tag" content="rule"><meta property="article:tag" content="formatter"><meta property="article:tag" content="modules"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://crystal-ameba.github.io/gallery/posts/internal-modules/ameba-modules.png"><meta name="twitter:creator" content="@veelenga"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="/css/style.css"><script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-63584551-6"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-63584551-6")</script><meta name="generator" content="Hexo 6.3.0">
<style>.not-gallery-item { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .not-gallery-item > span { position: relative; z-index: 10; }  .not-gallery-item img, .not-gallery-item .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .not-gallery-item img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .not-gallery-item-fallback { color: inherit; } .not-gallery-item-fallback img { opacity: 0 !important; }</style>
</head><body><nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation"><div class="container"><div class="navbar-brand"><a class="navbar-item navbar-logo" href="/"><img src="/images/logo.png" alt="" height="28"></a><div class="navbar-burger"><span></span> <span></span> <span></span></div></div><div class="navbar-menu navbar-start"><a class="navbar-item" href="/blog">Blog</a> <a class="navbar-item" href="https://crystal-ameba.github.io/ameba/">Documentation</a> <a class="navbar-item" target="_blank" rel="noopener" href="https://gitter.im/veelenga/ameba">Chat</a></div><div class="navbar-menu navbar-end"><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a><div class="navbar-item is-hoverable has-dropdown is-hidden-mobile is-hidden-tablet-only toc"><a class="navbar-item" title="Table of Contents"><i class="fa fa-list"></i></a><div class="navbar-dropdown is-right"><a class="navbar-item" href="#Source-Loading">1.1&nbsp;&nbsp;Source Loading</a> <a class="navbar-item" href="#AST-Parsing">1.2&nbsp;&nbsp;AST Parsing</a> <a class="navbar-item" href="#Rules">1.3&nbsp;&nbsp;Rules</a> <a class="navbar-item" href="#Format-results">1.4&nbsp;&nbsp;Format results</a><hr class="navbar-divider"><a class="navbar-item" href="#Wrap-up">2&nbsp;&nbsp;<b>Wrap-up</b></a></div></div><a class="navbar-item" title="Edit on GitHub" target="_blank" rel="noopener" href="https://github.com/crystal-ameba/crystal-ameba.github.io/edit/site/source/_posts/internal-modules.md"><i class="fas fa-edit"></i></a></div></div></nav><section class="section"><div class="container"><article class="article content gallery" itemscope itemprop="blogPost"><h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">Ameba&#39;s internals</h1><div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile"><span class="column is-narrow article-category"><i class="far fa-folder"></i> <a class="article-category-link" href="/categories/Tutorial/">Tutorial</a></span></div><div class="article-entry is-size-6-mobile" itemprop="articleBody"><p>In this article you will find a high level overview of the Ameba’s modules, which will help to understand how it works internally. We will cover everything needed starting from source code loading and finishing by showing results of static analysis.</p><img src="/gallery/posts/internal-modules/ameba-modules.png"> <span id="more"></span><p>Ameba and similar command-line applications for static analysis are required to be highly configurable. The end-user, usually, is able to change the configuration, disable or enable that or another checker/rule. Also, he is capable to change the format of the output results. Most of the static analysis tools allow inline disabling and much more…</p><p>As you can see, there are a lot of different requirements for such kind of tools and the appropriate design is a key for a good tool architecture and convenient usage.</p><p>Let’s take a look at the high-level picture of Ameba’s module architecture.</p><h3 id="Source-Loading"><a href="#Source-Loading" class="headerlink" title="Source Loading"></a>Source Loading</h3><p>Of course, the first step of static code analysis is a loading of that source code. It does not matter whether it is a file, a steam or just a regular string, Ameba is capable to read that and create a new <a href="https://crystal-ameba.github.io/ameba/Ameba/Source.html"><code>Source</code></a> abstraction. Such internal representation of source code is very convenient to operate on it. For example, it is possible to attach an <a href="https://crystal-ameba.github.io/ameba/Ameba/Issue.html"><code>Issue</code></a> to this source.</p><p><code>Source</code> also can be created programatically:</p><figure class="highlight crystal"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">"ameba"</span></span><br><span class="line"></span><br><span class="line">source = <span class="symbol">Ameba:</span>:Source.new <span class="string">%(</span></span><br><span class="line"><span class="string">  class Ameba::Internals</span></span><br><span class="line"><span class="string">    getter info : Info</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    def explain</span></span><br><span class="line"><span class="string">      puts info</span></span><br><span class="line"><span class="string">    end</span></span><br><span class="line"><span class="string">  end</span></span><br><span class="line"><span class="string">)</span>, <span class="string">"source.cr"</span></span><br><span class="line"></span><br><span class="line">source.issues <span class="comment"># =&gt; []</span></span><br></pre></td></tr></tbody></table></figure><h3 id="AST-Parsing"><a href="#AST-Parsing" class="headerlink" title="AST Parsing"></a>AST Parsing</h3><p>Unprocessed source code is a very difficult format for static analysis. Fortunately, Crystal language can do a lot of different ways of source code pre-processing, including <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">AST parsing</a>.</p><p>List of AST nodes is a quite convenient representation of a source code to decompose. It is widely used by Ameba internally to do a static analysis.</p><p>As you might have noticed, a <code>Source</code> responds to <a href="https://crystal-ameba.github.io/ameba/Ameba/Source.html#ast-instance-method"><code>#ast</code></a> method, which returns a list of AST nodes for that source:</p><figure class="highlight crystal"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">source.ast <span class="comment"># =&gt;</span></span><br><span class="line">  <span class="comment"># class Ameba::Internals</span></span><br><span class="line">  <span class="comment">#   getter(info : Info)</span></span><br><span class="line">  <span class="comment">#   def explain</span></span><br><span class="line">  <span class="comment">#     puts(info)</span></span><br><span class="line">  <span class="comment">#   end</span></span><br><span class="line">  <span class="comment"># end</span></span><br><span class="line"></span><br><span class="line">source.ast.<span class="keyword">class</span> <span class="comment"># =&gt; Crystal::ClassDef</span></span><br></pre></td></tr></tbody></table></figure><p>In this example, <code>ast</code> method returns an instance of <code>Crystal::ClassDef</code> because the top level node in the source code is a class, which is parsed by Crystal’s AST parser as <code>ClassDef</code>.</p><p>Next, nodes are iterated by rules.</p><h3 id="Rules"><a href="#Rules" class="headerlink" title="Rules"></a>Rules</h3><p>Rule is a basic abstraction that iterates over that or other representation of source code and report issues if such are detected. All rules inherit from <a href="https://crystal-ameba.github.io/ameba/Ameba/Rule/Base.html"><code>Rule::Base</code></a>.</p><p>Most rules <em>visit</em> AST nodes. There is a couple of different <em>visitors</em> which pass needed nodes to the handler. Let’s say there is a rule that disallows calling <code>puts</code> in a code. A simple version of it could look like this:</p><figure class="highlight crystal"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">module</span> <span class="title">Ameba::Rule</span></span></span><br><span class="line">  <span class="comment"># A rule that disallows calls to `puts` method.</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">NoPuts</span> ‹ <span class="title">Base</span></span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>(source)</span><br><span class="line">      <span class="symbol">AST:</span>:NodeVisitor.new <span class="keyword">self</span>, source</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test</span></span>(source, node : <span class="symbol">Crystal:</span>:Call)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">unless</span> node.name == <span class="string">"puts"</span></span><br><span class="line">      source.add_issue(<span class="keyword">self</span>, node, <span class="string">"puts method is called"</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></tbody></table></figure><p>There are two different <code>test</code> method. The first one, which accepts a source is a main entry point to the rule. It returns the <a href="https://crystal-ameba.github.io/ameba/Ameba/AST/NodeVisitor.html"><code>AST::NodeVisitor</code></a> which will visit AST nodes and pass only needed ones to the second <code>test</code> method (handler).</p><p>In a handler we just explore the node properties and add issues to the source code if the node matches the expectations.</p><p>So, in such a way a <code>Source</code> is passed to all the rules and can hold some issues on it:</p><figure class="highlight crystal"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">rule = <span class="symbol">Ameba:</span>:<span class="symbol">Rule:</span>:NoPuts.new</span><br><span class="line">rule.catch(source)</span><br><span class="line">source.issues <span class="comment"># =&gt;</span></span><br><span class="line">  <span class="comment"># [</span></span><br><span class="line">  <span class="comment">#   Ameba::Issue(</span></span><br><span class="line">  <span class="comment">#     @rule=Ameba::Rule::Lint::NoPuts(</span></span><br><span class="line">  <span class="comment">#       @enabled=true,</span></span><br><span class="line">  <span class="comment">#       @severity=Warning,</span></span><br><span class="line">  <span class="comment">#       @excluded=nil</span></span><br><span class="line">  <span class="comment">#     ),</span></span><br><span class="line">  <span class="comment">#     @message="puts method is called",</span></span><br><span class="line">  <span class="comment">#     @location=...,</span></span><br><span class="line">  <span class="comment">#     @end_location=...,</span></span><br><span class="line">  <span class="comment">#     @status=nil</span></span><br><span class="line">  <span class="comment">#   )</span></span><br><span class="line">  <span class="comment"># ]</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>Now the source holds an issue. It’s a time to report it.</p><h3 id="Format-results"><a href="#Format-results" class="headerlink" title="Format results"></a>Format results</h3><p>Formatters are used to format the output reported by Ameba.</p><p>For example, <a href="https://crystal-ameba.github.io/ameba/Ameba/Formatter/ExplainFormatter.html"><code>ExplainFormatter</code></a> is designed to show the detailed explanation of the issue in the source at a specific location. Another one is <a href="https://crystal-ameba.github.io/ameba/Ameba/Formatter/JSONFormatter.html"><code>JSONFormatter</code></a> which formats to JSON. Let’s give it a try:</p><figure class="highlight crystal"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">formatter = <span class="symbol">Ameba:</span>:<span class="symbol">Formatter:</span>:JSONFormatter.new(STDOUT)</span><br><span class="line">formatter.started([source])</span><br><span class="line">formatter.source_finished(source)</span><br><span class="line">formatter.finished([source])</span><br></pre></td></tr></tbody></table></figure><p>Formatters are designed to update its states using hooks, like</p><ul><li><code>started</code> - a hook to be called when inspection is started</li><li><code>source_finished</code> - inspection of a single source is finished</li><li><code>finished</code> - inspection is finished</li></ul><p>If we compile the source code above and run it, we will see:</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"metadata"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"ameba_version"</span><span class="punctuation">:</span> <span class="string">"0.10.0"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"crystal_version"</span><span class="punctuation">:</span> <span class="string">"0.30.0"</span></span><br><span class="line">    <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"sources"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"issues"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">{</span></span><br><span class="line">                    <span class="attr">"end_location"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                        <span class="attr">"column"</span><span class="punctuation">:</span> <span class="number">15</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">"line"</span><span class="punctuation">:</span> <span class="number">6</span></span><br><span class="line">                    <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">"location"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                        <span class="attr">"column"</span><span class="punctuation">:</span> <span class="number">7</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">"line"</span><span class="punctuation">:</span> <span class="number">6</span></span><br><span class="line">                    <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">"message"</span><span class="punctuation">:</span> <span class="string">"puts method is called"</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">"rule_name"</span><span class="punctuation">:</span> <span class="string">"NoPuts"</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">"severity"</span><span class="punctuation">:</span> <span class="string">"Convention"</span></span><br><span class="line">                <span class="punctuation">}</span></span><br><span class="line">            <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"path"</span><span class="punctuation">:</span> <span class="string">"source.cr"</span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"summary"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"issues_count"</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"target_sources_count"</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>Congratulations, we successfully analyzed our source code and reported an issue.</p><h2 id="Wrap-up"><a href="#Wrap-up" class="headerlink" title="Wrap-up"></a>Wrap-up</h2><p>In this tutorial we went through the steps to programatically load source code, parse it into AST nodes, create a custom rule, create an issue and show results. It covers the full loop, which Ameba does while doing static analysis. So it can help to understand how it works internally.</p><p>The code used above is available as a <a target="_blank" rel="noopener" href="https://gist.github.com/veelenga/d05eb5a3b346748ed4ba309cf79c73e4">gist</a>.</p><p>Hope you find it useful. Cheers!</p></div><div class="columns is-variable is-1 is-multiline is-mobile"><span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/parser/">#parser</a></span> <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/rule/">#rule</a></span> <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/formatter/">#formatter</a></span> <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/modules/">#modules</a></span></div><div class="columns is-mobile is-multiline article-nav"><span class="column is-12-mobile is-half-desktop article-nav-prev"><a href="/2019/11/28/release-v0.11.0/">Ameba v0.11.0 - New rules, lint in parallel, GitHub action and more.</a> </span><span class="column is-12-mobile is-half-desktop article-nav-next"><a href="/2019/07/22/how-to-write-extension/">Writing an extension for Ameba linter</a></span></div></article><div class="comments"><h3 class="title is-4">Comments</h3><script>var disqus_config=function(){this.page.url="https://crystal-ameba.github.io/2019/09/03/internals/",this.page.identifier="2019/09/03/internals/",this.language="en"};!function(){var t=document,e=t.createElement("script");e.src="//crystal-ameba-github-io.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div></section><footer class="footer"><div class="container"><div class="columns content"><div class="column is-narrow has-text-centered">&copy; 2025 Vitalii Elenhaupt&nbsp; Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a></div><div class="column is-hidden-mobile"></div><div class="column is-narrow"><div class="columns is-mobile is-multiline is-centered"><a class="column is-narrow has-text-black" title="GitHub" target="_blank" rel="noopener" href="https://github.com/crystal-ameba/crystal-ameba.github.io">GitHub</a></div></div></div></div></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now</a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p></div><script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script><script>$(document).ready((function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})}))</script><script>window.FontAwesomeConfig={searchPseudoElements:!0},moment.locale("en-AU")</script><script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script><script>!function(e){e(document).ready((function(){"function"==typeof e.fn.lightGallery&&e(".article.gallery").lightGallery({selector:".gallery-item"}),"function"==typeof e.fn.justifiedGallery&&e(".justified-gallery").justifiedGallery()}))}(jQuery)</script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><style>.hljs{position:relative}.hljs .clipboard-btn{float:right;color:#9a9a9a;background:0 0;border:none;cursor:pointer}.hljs .clipboard-btn:hover{color:#8a8a8a}.hljs>.clipboard-btn{display:none;position:absolute;right:4px;top:4px}.hljs:hover>.clipboard-btn{display:inline}.hljs>figcaption>.clipboard-btn{margin-right:4px}</style><script>$(document).ready((function(){$("figure.hljs").each((function(t,e){var a="code-"+t,r=e.querySelector(".code"),c=$('<button>Copy <i class="far fa-clipboard"></i></button>');r.id=a,c.addClass("clipboard-btn"),c.attr("data-clipboard-target-id",a);var n=e.querySelector("figcaption");n?n.append(c[0]):e.prepend(c[0])})),new ClipboardJS(".clipboard-btn",{target:function(t){return document.getElementById(t.getAttribute("data-clipboard-target-id"))}}).on("success",(function(t){t.clearSelection()}))}))</script><script src="/js/script.js"></script><div class="searchbox ins-search"><div class="searchbox-mask"></div><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input type="text" class="searchbox-input ins-search-input" placeholder="Type something..."> <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>!function(T){T.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},CONTENT_URL:"/content.json"}}(window)</script><script src="/js/insight.js"></script></body></html>